<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Učitelj - Naloge</title>
    <link rel="stylesheet" href="ucitelj.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>UČITELJ</h1>
            <p>Pregled oddanih nalog</p>
        </header>
        
        <nav class="main-nav">
            <a href="ucitelj.html" class="nav-link">Gradiva</a>
            <a href="ucitelj_naloge.html" class="nav-link active"> Naloge</a>
        </nav>
        
        <main>
            <!-- Izbor predmeta -->
            <div class="card">
                <h2>Izberi predmet</h2>
                <select id="izbiraPredmeta" class="form-select" onchange="prikaziNaloge()">
                    <option value="">-- Izberi predmet --</option>
                    <option value="matematika">Matematiko</option>
                    <option value="slovenscina">Slovenščino</option>
                    <option value="anglescina">Angleščino</option>
                </select>
            </div>

            <!-- Prikaz nalog -->
            <div class="card" id="nalogeSection" style="display: none;">
                <h2>Oddane naloge za <span id="imePredmeta"></span></h2>
                <div id="seznamNalog">
                    <!-- Tu se prikažejo naloge -->
                </div>
            </div>
        </main>
    </div>

    <script>
        // Podatki o oddanih nalogah
        const oddaneNaloge = {
            "matematika": [
                { 
                    ucenec: "Ana Novak", 
                    naloga: "Algebraične enačbe", 
                    datum: "2023-11-15",
                    ocena: "" 
                },
                { 
                    ucenec: "Janez Kovač", 
                    naloga: "Geometrijske naloge", 
                    datum: "2023-11-14",
                    ocena: "5" 
                },
                { 
                    ucenec: "Maja Horvat", 
                    naloga: "Računanje ulomkov", 
                    datum: "2023-11-13",
                    ocena: "" 
                }
            ],
            "slovenscina": [
                { 
                    ucenec: "Marko Petrič", 
                    naloga: "Bralni dnevnik", 
                    datum: "2023-11-12",
                    ocena: "4" 
                },
                { 
                    ucenec: "Lara Modic", 
                    naloga: "Analiza pesmi", 
                    datum: "2023-11-11",
                    ocena: "" 
                }
            ],
            "anglescina": [
                { 
                    ucenec: "Tina Žagar", 
                    naloga: "Esej o moji družini", 
                    datum: "2023-11-10",
                    ocena: "" 
                }
            ]
        };

        // Funkcija za prikaz nalog
        function prikaziNaloge() {
            const izbraniPredmet = document.getElementById('izbiraPredmeta').value;
            const nalogeDiv = document.getElementById('nalogeSection');

            if (!izbraniPredmet) {
                nalogeDiv.style.display = 'none';
                return;
            }

            // Prikaži sekcijo
            nalogeDiv.style.display = 'block';

            // Posodobi ime predmeta
            document.getElementById('imePredmeta').textContent = 
                document.getElementById('izbiraPredmeta').selectedOptions[0].text;

            // Prikaži naloge
            prikaziSeznamNalog(izbraniPredmet);
        }

        // Funkcija za prikaz seznama nalog
        function prikaziSeznamNalog(predmet) {
            const seznamDiv = document.getElementById('seznamNalog');
            const naloge = oddaneNaloge[predmet] || [];

            if (naloge.length === 0) {
                seznamDiv.innerHTML = '<p> Ni oddanih nalog za ta predmet.</p>';
                return;
            }

            let html = '';
            naloge.forEach((naloga, index) => {
                const jeOcenjeno = naloga.ocena !== "";
                
                html += `
                    <div class="subject-item" style="background: ${jeOcenjeno ? '#f0fdf4' : '#fffbeb'}; border-left-color: ${jeOcenjeno ? '#10b981' : '#f59e0b'};">
                        <div style="flex: 1;">
                            <h3>${naloga.naloga}</h3>
                            <p><strong>Učenec:</strong> ${naloga.ucenec}</p>
                            <p><strong>Datum oddaje:</strong> ${naloga.datum}</p>
                            <p><strong>Status:</strong> ${jeOcenjeno ? ' Ocenjeno (' + naloga.ocena + ')' : ' Čaka na oceno'}</p>
                        </div>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <button class="btn btn-sm" onclick="prenesiNalogo('${naloga.naloga}')">
                                Prenesi
                            </button>
                            ${!jeOcenjeno ? `
                                <select onchange="dodajOceno('${predmet}', ${index}, this.value)" style="padding: 8px; border-radius: 5px; border: 1px solid #ddd;">
                                    <option value="">Oceni</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            ` : ''}
                        </div>
                    </div>
                `;
            });

            seznamDiv.innerHTML = html;
        }

        // Funkcija za dodajanje ocene
        function dodajOceno(predmet, index, ocena) {
            if (!ocena) return;

            if (confirm(`Dodati oceno ${ocena} za nalogo "${oddaneNaloge[predmet][index].naloga}"?`)) {
                oddaneNaloge[predmet][index].ocena = ocena;
                prikaziSeznamNalog(predmet); // Osveži prikaz
                alert(`Ocena ${ocena} dodana!`);
            }
        }

        // Funkcija za prenos naloge
        function prenesiNalogo(imeNaloge) {
            alert(`Naloga "${imeNaloge}" se prenaša...\n\nV resni aplikaciji bi se datoteka res prenesla.`);
        }
    </script>
</body>
</html>