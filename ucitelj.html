<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Učitelj - Gradiva</title>
    <link rel="stylesheet" href="ucitelj.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>UČITELJ</h1>
            <p>Upravljanje gradiv</p>
        </header>
        
        <nav class="main-nav">
            <a href="ucitelj.html" class="nav-link active">Gradiva</a>
            <a href="ucitelj_naloge.html" class="nav-link">Naloge</a>
        </nav>
        
        <main>
            <!-- Izbor predmeta -->
            <div class="card">
                <h2>Moji predmeti</h2>
                <select id="izbiraPredmeta" class="form-select" onchange="prikaziGradiva()">
                    <option value="">-- Izberi predmet --</option>
                    <option value="matematika">Matematiko</option>
                    <option value="slovenscina">Slovenščino</option>
                    <option value="anglescina">Angleščino</option>
                </select>
            </div>

            <!-- Nalaganje gradiv -->
            <div class="card" id="nalaganjeSection" style="display: none;">
                <h2>Dodaj novo gradivo</h2>
                <input type="file" id="novaDatoteka" class="form-input">
                <button class="btn btn-success" onclick="dodajGradivo()" style="margin-top: 10px;">
                     Naloži gradivo
                </button>
            </div>

            <!-- Prikaz gradiv -->
            <div class="card" id="gradivaSection" style="display: none;">
                <h2>Gradiva za <span id="imePredmeta"></span></h2>
                <div id="seznamGradiv">
                    <!-- Tu se prikažejo gradiva -->
                </div>
            </div>
        </main>
    </div>

    <script>
        // Shramba za gradiva učitelja
        let gradivaUcitelja = {
            "matematika": [
                { ime: "Algebra.pdf", datum: "2023-11-15" },
                { ime: "Geometrija.docx", datum: "2023-11-10" }
            ],
            "slovenscina": [
                { ime: "Bralna lista.pdf", datum: "2023-11-12" }
            ],
            "anglescina": []
        };

        // Funkcija za prikaz gradiv
        function prikaziGradiva() {
            const izbraniPredmet = document.getElementById('izbiraPredmeta').value;
            const nalaganjeDiv = document.getElementById('nalaganjeSection');
            const gradivaDiv = document.getElementById('gradivaSection');

            if (!izbraniPredmet) {
                nalaganjeDiv.style.display = 'none';
                gradivaDiv.style.display = 'none';
                return;
            }

            // Prikaži sekciji
            nalaganjeDiv.style.display = 'block';
            gradivaDiv.style.display = 'block';

            // Posodobi ime predmeta
            document.getElementById('imePredmeta').textContent = document.getElementById('izbiraPredmeta').selectedOptions[0].text;

            // Prikaži gradiva
            prikaziSeznamGradiv(izbraniPredmet);
        }

        // Funkcija za prikaz seznama gradiv
        function prikaziSeznamGradiv(predmet) {
            const seznamDiv = document.getElementById('seznamGradiv');
            const gradiva = gradivaUcitelja[predmet] || [];

            if (gradiva.length === 0) {
                seznamDiv.innerHTML = '<p> Ni gradiv za ta predmet.</p>';
                return;
            }

            let html = '';
            gradiva.forEach((gradivo, index) => {
                html += `
                    <div class="subject-item">
                        <div style="flex: 1;">
                            <h3>${gradivo.ime}</h3>
                            <p>Dodano: ${gradivo.datum}</p>
                        </div>
                        <button class="btn btn-danger btn-sm" onclick="izbrisiGradivo('${predmet}', ${index})">
                            Izbriši
                        </button>
                    </div>
                `;
            });

            seznamDiv.innerHTML = html;
        }

        // Funkcija za dodajanje gradiva
        function dodajGradivo() {
            const predmet = document.getElementById('izbiraPredmeta').value;
            const datotekaInput = document.getElementById('novaDatoteka');
            const datoteka = datotekaInput.files[0];

            if (!predmet) {
                alert('Najprej izberi predmet!');
                return;
            }

            if (!datoteka) {
                alert('Izberi datoteko!');
                return;
            }

            // Dodaj novo gradivo
            const novoGradivo = {
                ime: datoteka.name,
                datum: new Date().toLocaleDateString('sl-SI')
            };

            gradivaUcitelja[predmet].push(novoGradivo);

            // Ponastavi vnos
            datotekaInput.value = '';

            // Osveži prikaz
            prikaziSeznamGradiv(predmet);

            alert(`Gradivo "${datoteka.name}" je bilo dodano!`);
        }

        // Funkcija za brisanje gradiva
        function izbrisiGradivo(predmet, index) {
            if (confirm('Ali res želiš izbrisati to gradivo?')) {
                gradivaUcitelja[predmet].splice(index, 1);
                prikaziSeznamGradiv(predmet);
                alert('Gradivo je bilo izbrisano!');
            }
        }
    </script>
</body>
</html>